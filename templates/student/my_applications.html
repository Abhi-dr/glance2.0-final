{% extends 'student/base.html' %}
{% load static %}

{% block title %}
Student -> My Applications
{% endblock %}


{% block body %}

<div class="container-fluid">

  {% for message in messages %}

  <div class="alert alert-warning alert-dismissible fade show" role="alert">
    <strong>{{ message.tag }}</strong> {{ message }}
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>

  {% endfor %}

  <div class="card">
    <div class="card-body">
      <h5 class="card-title fw-semibold mb-3">My Applications</h5>
      <p class="mb-0">Good to see you here! </p>
    </div>
  </div>

  <div class="row row-cols-1 row-cols-md-3 g-4">

    {% if applications %}

    {% for application in applications %}

    <div class="col-md-3">
      <h5 class="card-title fw-semibold mb-3 text-white-50">Past Applications</h5>

      <a href="{% url 'applied_job' application.job.slug %}">

        <div class="card">
          <img src="{{ application.job.company.logo.url }}" class="card-img-top" alt="...">
          <div class="card-body">
            <h5 class="card-title">{{ application.job.title|title|truncatechars:10 }} @{{ application.job.company.name|title|truncatechars:10 }}</h5>
            <!-- <p class="card-text">
                
            </p> -->
            <!-- <p class="card-text">
              Total Applications: {{ application.get_all_applications_count }}<br>
            </p> -->

            <a class="btn btn-outline-{{ application.get_color_based_on_status }} mt-1 mb-2 w-100">STATUS: {{ application.status|title }}</a>
            
          </div>
        </div>

      </a>

    </div>

    {% endfor %}

    {% else %}

    <div class="col-lg-12">
      <h5 class="card-title fs-6 fw-semibold mb-3 text-white">NO APPLICATION FOUND! Apply SOON!</h5>

      <a href="{% url 'all_jobs' %}" class="btn btn-outline-dark w-100 btn-lg">Apply Now</a>

      {% endif %}
    </div>

      <!-- <div class="col-md-3">
      <h5 class="card-title fw-semibold mb-4">Purchased</h5>
      <div class="card">
        <img src="{% static 'img/dashboard/images/products/s1.jpg' %}" class="card-img-top" alt="...">
        <div class="card-body">
          <h5 class="card-title">Class 10th Course</h5>
          <p class="card-text">Keep your study ongoing with us.</p>
          <a href="#" class="btn btn-primary">Resume</a>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <h5 class="card-title fw-semibold mb-4">Purchased</h5>
      <div class="card">
        <img src="{% static 'img/dashboard/images/products/s5.jpg' %}" class="card-img-top" alt="...">
        <div class="card-body">
          <h5 class="card-title">Class 11th Course</h5>
          <p class="card-text">Keep your study ongoing with us.</p>
          <a href="#" class="btn btn-primary">Resume</a>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <h5 class="card-title fw-semibold mb-4">Purchased</h5>
      <div class="card">
        <img src="{% static 'img/dashboard/images/products/s7.jpg' %}" class="card-img-top" alt="...">
        <div class="card-body">
          <h5 class="card-title">Class 12th Course</h5>
          <p class="card-text">Keep your study ongoing with us.</p>
          <a href="#" class="btn btn-primary">Resume</a>
        </div>
      </div>
    </div> -->

    </div>

  </div>

  {% endblock %}